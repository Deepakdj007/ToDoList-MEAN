<div class="container-fluid d-flex justify-content-center align-items-center">
  <div class="container-top">
    <div class="login">
      <h1 class="login-title">Register</h1>
    </div>
    <div class="container">
      <form class="login-form" [formGroup]="registerForm" (ngSubmit)="onSubmit()">

        <div class="form-field">
          <label for="name">Name </label>
          <div class="input d-flex flex-row" [ngClass]="{'error-style':(submitted || registerForm.controls['name'].touched) && registerForm.controls['name'].invalid}">
            <input formControlName="name" id="name" type="text" class="input-field" placeholder="Name" name="name" />
          </div>

          <div class="errors">
            <div *ngIf="(submitted || registerForm.controls['name'].touched) && registerForm.controls['name'].invalid">
              <div *ngIf="registerForm.controls['name'].errors!['required']">* Name is required</div>
              <div *ngIf="registerForm.controls['name'].errors!['minlength']">
                * Name must be at least {{ registerForm.controls['name'].errors!['minlength'].requiredLength }} characters long
              </div>
            </div>
          </div>
          </div>

        <div class="form-field">
          <label for="email">Email </label>
          <div class="input d-flex flex-row" [ngClass]="{'error-style':(submitted || registerForm.controls['email'].touched) && registerForm.controls['email'].invalid}">
            <input formControlName="email" id="email" type="email" class="input-field" placeholder="me@example.com" name="email" />
          </div>
          <div class="errors">
            <div *ngIf="(submitted || registerForm.controls['email'].touched) && registerForm.controls['email'].invalid">
              <div *ngIf="registerForm.controls['email'].errors!['required']">* Email is required</div>
              <div *ngIf="registerForm.controls['email'].errors!['email']">* Please enter a valid email</div>
            </div>
          </div>
        </div>

        <div class="form-field">
          <label for="password">Password </label>
          <div class="input d-flex flex-row" [ngClass]="{'error-style':(submitted || registerForm.controls['password'].touched) && registerForm.controls['password'].invalid}">
            <input formControlName="password" type="{{ showPassword ? 'text' : 'password' }}" class="input-field" id="password" name="password" placeholder="password">
            <i (click)="togglePasswordVisibility('password')" class="{{ showPassword ? 'fa fa-eye-slash' : 'fa fa-eye' }}"></i>
          </div>
          <div class="password-errors-container">
            <div *ngIf="(submitted || registerForm.controls['password'].touched) && registerForm.controls['password'].invalid">
              <div class="password-errors d-inline">
                  <span  *ngIf="registerForm.controls['password'].errors!['required']">* Password is required. </span>
                  <span  *ngIf="registerForm.controls['password'].errors!['minlength']">
                    * Password must be at least {{ registerForm.controls['password'].errors!['minlength'].requiredLength }} characters long.
                  </span>
                  <span *ngIf="registerForm.controls['password'].errors!['pattern']">
                     * Password must include at least one uppercase letter, one lowercase letter, one number, and one special character.
                  </span>
              </div>
            </div>
          </div>
        </div>

        <div class="form-field">
          <label for="password">Confirm Password </label>
          <div class="input d-flex flex-row" [ngClass]="{'error-style':(submitted || registerForm.controls['confirmPassword'].touched) && registerForm.controls['confirmPassword'].invalid}">
            <input formControlName="confirmPassword" type="{{ showConfirmPassword ? 'text' : 'password' }}" class="input-field" id="confirmPassword" name="confirmPassword" placeholder="password">
            <i (click)="togglePasswordVisibility('confirmPassword')" class="{{ showConfirmPassword ? 'fa fa-eye-slash' : 'fa fa-eye' }}"></i>
          </div>
          <div class="errors">
            <div *ngIf="(submitted || registerForm.controls['confirmPassword'].touched) && registerForm.controls['confirmPassword'].invalid">
              <div *ngIf="registerForm.controls['confirmPassword'].errors!['required']">Confirm Password is required</div>
              <div *ngIf="registerForm.controls['confirmPassword'].errors!['MustMatch']">Passwords do not match</div>
            </div>
          </div>
        </div>

        <button class="global-button-fill" type="submit" value="Register">Register</button>
        <p class="text-center">Already a user?<a routerLink='/login' class="register-link"> login now</a></p>
      </form>
    </div>
</div>
</div>
